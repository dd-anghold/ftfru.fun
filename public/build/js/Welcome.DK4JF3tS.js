import{_ as D}from"./nav.vue_vue_type_style_index_0_lang.mfYrthD4.js";import{r as d,o as E,i as T,c as o,e as m,f as p,u as _,h as a,F as n,j as I,Q as f,b as r,Z as A,p as j,t as i,m as h,l as C,n as O}from"./app.a5hvPRJG.js";/* empty css            */const $={class:"content"},F={class:"main-container main-container--fullheight bots-overview"},P={class:"bots"},S=["href"],L=["src"],G={class:"bot__status"},N={class:"bot__status-property bot__status-property--name has-tooltip"},U={class:"bot__status-property bot__status-property--text"},V={class:"stream_action"},z={key:1,class:"fa-solid fa-stop"},H="root",M="02092506dD",J={__name:"Welcome",setup(Q){const c=d([]),v=btoa(`${H}:${M}`),l=d({}),u=async()=>{try{const t=await fetch(`/steamapi/ISteamUser/GetPlayerSummaries/v0002/?key=39EA90A863FC233C9868C29FF3591B68&steamids=${f().props.playerData}`,{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)throw new Error("HTTP error "+t.status);const s=await t.json();c.value=s.response.players;const e=f().props.playerData.split(",");c.value.sort((b,g)=>{const x=e.indexOf(b.steamid),B=e.indexOf(g.steamid);return x-B})}catch(t){console.error("Error:",t)}},w=async()=>{try{const t=await fetch("/streamapi/",{method:"GET",headers:{Authorization:`Basic ${v}`,Accept:"application/json"},mode:"cors"});if(!t.ok)throw new Error("HTTP error "+t.status);const s=await t.json();l.value=s.response||{}}catch(t){console.error("Error:",t)}};E(()=>{u();const t=setInterval(u,7500),s=setInterval(w,7500);T(()=>{clearInterval(t),clearInterval(s)})});const y=t=>{switch(t){case 0:return"Офлайн";case 1:return"В сети";case 2:return"Занят";case 3:return"Отошел";case 4:return"Не беспокоить";case 5:return"Ищет обмен";case 6:return"Ищет игру";default:return"Неизвестный статус"}},k=t=>{switch(t){case 0:return"Offline";case 1:return"Online";case 2:return"Busy";case 3:return"Away";case 4:return"Do not disturb";case 5:return"Looking for trade";case 6:return"Looking for game";default:return"Unknown status"}};return(t,s)=>(r(),o(n,null,[m(_(A),null,{default:p(()=>s[0]||(s[0]=[a("title",null,"Актив стима",-1)])),_:1}),a("section",$,[a("main",F,[s[2]||(s[2]=a("h1",{class:"overview__title"},"Активность стима",-1)),a("div",P,[(r(!0),o(n,null,I(c.value,e=>(r(),o("a",{key:e.steamid,href:"https://steamcommunity.com/profiles/"+e.steamid,target:"_blank"},[a("div",{class:j(["bot",`status--${k(e.personastate).toLowerCase()}`])},[a("img",{src:e.avatarfull,class:"bot__avatar has-tooltip","data-original-title":"null"},null,8,L),a("div",G,[a("span",N,i(e.personaname),1),a("span",U,[e.gameextrainfo?(r(),o(n,{key:0},[h(" Play in "+i(e.gameextrainfo),1)],64)):(r(),o(n,{key:1},[h(i(y(e.personastate)),1)],64))])]),a("div",V,[Object.values(l.value).includes(e.steamid)?(r(),C(_(O),{key:0,href:t.route("stream",e.steamid)},{default:p(()=>s[1]||(s[1]=[a("i",{class:"fa-solid fa-play"},null,-1)])),_:2},1032,["href"])):(r(),o("i",z))])],2)],8,S))),128))])])]),m(D)],64))}};export{J as default};
